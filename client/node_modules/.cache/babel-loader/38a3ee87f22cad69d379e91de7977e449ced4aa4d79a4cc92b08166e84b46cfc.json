{"ast":null,"code":"var _jsxFileName = \"/home/mbeale/Development/code/phase-5/Fantasy_Cycling/client/src/pages/OpenRiders.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchRiders } from \"../store/slices/riderSlice\";\nimport { updateRoster } from \"../store/slices/teamSlice\";\nimport RiderList from \"../components/RiderList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OpenRiders = () => {\n  _s();\n  const dispatch = useDispatch();\n  const {\n    riders,\n    loading\n  } = useSelector(state => state.riders);\n  const {\n    teams\n  } = useSelector(state => state.teams);\n  const [filteredRiders, setFilteredRiders] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  useEffect(() => {\n    dispatch(fetchRiders());\n  }, [dispatch]);\n  useEffect(() => {\n    const allTeamRiders = teams.flatMap(team => [team.active_gc_rider, ...team.active_domestiques, ...team.bench_gc_riders, ...team.bench_domestiques]).map(rider => rider.id);\n    setFilteredRiders(riders.filter(rider => !allTeamRiders.includes(rider.id)));\n  }, [riders, teams]);\n  const handleSearch = e => {\n    setSearchTerm(e.target.value);\n  };\n  const handleDraft = rider => {\n    // Assuming the user has only one team for simplicity\n    const userTeam = teams[0];\n    if (userTeam && userTeam.trades_left > 0) {\n      const totalRiders = [userTeam.active_gc_rider, ...userTeam.active_domestiques, ...userTeam.bench_gc_riders, ...userTeam.bench_domestiques].length;\n      if (totalRiders < 9) {\n        let newRoster = {\n          active_gc_rider: userTeam.active_gc_rider ? [userTeam.active_gc_rider.id] : [],\n          active_domestiques: userTeam.active_domestiques.map(r => r.id),\n          bench_gc_riders: userTeam.bench_gc_riders.map(r => r.id),\n          bench_domestiques: userTeam.bench_domestiques.map(r => r.id)\n        };\n        if (rider.is_gc) {\n          if (newRoster.active_gc_rider.length === 0) {\n            newRoster.active_gc_rider = [rider.id];\n          } else if (newRoster.bench_gc_riders.length < 2) {\n            newRoster.bench_gc_riders.push(rider.id);\n          } else {\n            alert(\"You can't add more GC riders to your team.\");\n            return;\n          }\n        } else {\n          if (newRoster.active_domestiques.length < 4) {\n            newRoster.active_domestiques.push(rider.id);\n          } else if (newRoster.bench_domestiques.length < 2) {\n            newRoster.bench_domestiques.push(rider.id);\n          } else {\n            alert(\"You can't add more domestique riders to your team.\");\n            return;\n          }\n        }\n        dispatch(updateRoster({\n          teamId: userTeam.id,\n          rosterData: newRoster\n        }));\n      } else {\n        alert(\"Your team is full. You need to remove a rider before adding a new one.\");\n      }\n    } else {\n      alert(\"You don't have any trades left or you don't have a team yet.\");\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 12\n    }, this);\n  }\n  const displayRiders = searchTerm ? filteredRiders.filter(rider => rider.name.toLowerCase().includes(searchTerm.toLowerCase()) || rider.team.toLowerCase().includes(searchTerm.toLowerCase())) : filteredRiders;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"open-riders\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Available Riders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search riders or teams\",\n      value: searchTerm,\n      onChange: handleSearch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RiderList, {\n      riders: displayRiders,\n      onDraft: handleDraft\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n_s(OpenRiders, \"5sEptkwg5e87w5KfWaaT89vGDZg=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c = OpenRiders;\nexport default OpenRiders;\nvar _c;\n$RefreshReg$(_c, \"OpenRiders\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","fetchRiders","updateRoster","RiderList","jsxDEV","_jsxDEV","OpenRiders","_s","dispatch","riders","loading","state","teams","filteredRiders","setFilteredRiders","searchTerm","setSearchTerm","allTeamRiders","flatMap","team","active_gc_rider","active_domestiques","bench_gc_riders","bench_domestiques","map","rider","id","filter","includes","handleSearch","e","target","value","handleDraft","userTeam","trades_left","totalRiders","length","newRoster","r","is_gc","push","alert","teamId","rosterData","children","fileName","_jsxFileName","lineNumber","columnNumber","displayRiders","name","toLowerCase","className","type","placeholder","onChange","onDraft","_c","$RefreshReg$"],"sources":["/home/mbeale/Development/code/phase-5/Fantasy_Cycling/client/src/pages/OpenRiders.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { fetchRiders } from \"../store/slices/riderSlice\";\nimport { updateRoster } from \"../store/slices/teamSlice\";\nimport RiderList from \"../components/RiderList\";\n\nconst OpenRiders = () => {\n  const dispatch = useDispatch();\n  const { riders, loading } = useSelector((state) => state.riders);\n  const { teams } = useSelector((state) => state.teams);\n  const [filteredRiders, setFilteredRiders] = useState([]);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  useEffect(() => {\n    dispatch(fetchRiders());\n  }, [dispatch]);\n\n  useEffect(() => {\n    const allTeamRiders = teams\n      .flatMap((team) => [\n        team.active_gc_rider,\n        ...team.active_domestiques,\n        ...team.bench_gc_riders,\n        ...team.bench_domestiques,\n      ])\n      .map((rider) => rider.id);\n    setFilteredRiders(\n      riders.filter((rider) => !allTeamRiders.includes(rider.id))\n    );\n  }, [riders, teams]);\n\n  const handleSearch = (e) => {\n    setSearchTerm(e.target.value);\n  };\n\n  const handleDraft = (rider) => {\n    // Assuming the user has only one team for simplicity\n    const userTeam = teams[0];\n    if (userTeam && userTeam.trades_left > 0) {\n      const totalRiders = [\n        userTeam.active_gc_rider,\n        ...userTeam.active_domestiques,\n        ...userTeam.bench_gc_riders,\n        ...userTeam.bench_domestiques,\n      ].length;\n\n      if (totalRiders < 9) {\n        let newRoster = {\n          active_gc_rider: userTeam.active_gc_rider\n            ? [userTeam.active_gc_rider.id]\n            : [],\n          active_domestiques: userTeam.active_domestiques.map((r) => r.id),\n          bench_gc_riders: userTeam.bench_gc_riders.map((r) => r.id),\n          bench_domestiques: userTeam.bench_domestiques.map((r) => r.id),\n        };\n\n        if (rider.is_gc) {\n          if (newRoster.active_gc_rider.length === 0) {\n            newRoster.active_gc_rider = [rider.id];\n          } else if (newRoster.bench_gc_riders.length < 2) {\n            newRoster.bench_gc_riders.push(rider.id);\n          } else {\n            alert(\"You can't add more GC riders to your team.\");\n            return;\n          }\n        } else {\n          if (newRoster.active_domestiques.length < 4) {\n            newRoster.active_domestiques.push(rider.id);\n          } else if (newRoster.bench_domestiques.length < 2) {\n            newRoster.bench_domestiques.push(rider.id);\n          } else {\n            alert(\"You can't add more domestique riders to your team.\");\n            return;\n          }\n        }\n\n        dispatch(\n          updateRoster({\n            teamId: userTeam.id,\n            rosterData: newRoster,\n          })\n        );\n      } else {\n        alert(\n          \"Your team is full. You need to remove a rider before adding a new one.\"\n        );\n      }\n    } else {\n      alert(\"You don't have any trades left or you don't have a team yet.\");\n    }\n  };\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  const displayRiders = searchTerm\n    ? filteredRiders.filter(\n        (rider) =>\n          rider.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          rider.team.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    : filteredRiders;\n\n  return (\n    <div className=\"open-riders\">\n      <h1>Available Riders</h1>\n      <input\n        type=\"text\"\n        placeholder=\"Search riders or teams\"\n        value={searchTerm}\n        onChange={handleSearch}\n      />\n      <RiderList riders={displayRiders} onDraft={handleDraft} />\n    </div>\n  );\n};\n\nexport default OpenRiders;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}